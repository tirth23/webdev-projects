<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!-- <button onclick="expensiveCalculation(event, 'Hello', 'World')">Click Me</button> -->

  <button onclick="throttledCallAPI(event, 'Hello', 'World')">Click Me</button>

  <script>
    /* used for resize, scroll, and other events that fire multiple times, where we need to
    throttle event i.e., only call the function after a certain amount of time has passed */


    // let counter = 0;
    // function expensiveCalculation(arr) {
    //   //calls an API and gets data
    //   console.log("Fetching data...", counter++, this.name, arr);
    // }
    // const throttle = (func, limit) => {
    //   let flag = true;
    //   return function () {
    //     let context = this;
    //     let args = arguments;
    //     if (flag) {
    //       func.apply(context, args);
    //       flag = false;
    //       setTimeout(() => flag = true, limit);
    //     }
    //   }
    // }
    // /* if difference between two func call is more than 300 milliseconds, then only call the function */
    // /* call the function after 500 milliseconds even if the user clicks more than once */
    // const throttledCallAPI = throttle(expensiveCalculation, 500);


    // let counter = 0;
    // function expensiveCalculation(arr) {
    //   //calls an API and gets data
    //   console.log("Fetching data...", counter++, this.name, arr);
    // }
    // const throttle = (func, limit) => {
    //   let timerId = null;
    //   return function () {
    //     if(timerId) return;
    //     timerId = setTimeout(() => {
    //       func.apply(this, arguments);
    //       timerId = null;
    //     }, limit);
    //   }
    // }
    // /* call the function after 500 milliseconds even if the user clicks more than once */
    // const throttledCallAPI = throttle(expensiveCalculation, 500);

    // /* Modern approach without this binding */
    // let counter = 0;
    // const getData = (e, ...arr) => {
    //   console.log("Fetching data...", counter++, arr, e.target.value);
    // };
    // const throttle = (func, delay) => {
    //   let timer = null;
    //   return (...args) => {
    //     if (timer) return;
    //     timer = setTimeout(() => {
    //       func(...args);
    //       timer = null;
    //     }, delay);
    //   }
    // }
    // const throttledCallAPI = throttle(getData, 300);


  </script>
</body>

</html>
